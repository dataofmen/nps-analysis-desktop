# 배달의민족 NPS 자동 분석 시스템 사용 가이드

## 🎯 개요

이 시스템은 데이터 분석가가 배달의민족 Qualtrics 설문 데이터를 업로드하면 **인구통계 가중치를 자동으로 적용**하여 NPS 지표를 계산하고 분석 결과를 시각화해주는 GUI 프로그램입니다.

### 주요 기능
- ✅ 파일 업로드만으로 자동 분석
- ✅ 241개 인구통계 세그먼트 가중치 자동 적용
- ✅ NPS 그룹별 카테고리 분석
- ✅ 인구통계별 NPS 분해 및 시각화
- ✅ 한글 UI 및 직관적인 사용자 인터페이스

## 🚀 시작하기

### 1. 백엔드 서버 시작
```bash
cd backend
uvicorn main:app --reload
```

서버가 http://localhost:8000 에서 실행됩니다.

### 2. 프론트엔드 시작
```bash
cd frontend
npm install  # 최초 1회만 실행
npm start
```

브라우저가 자동으로 http://localhost:3000 을 엽니다.

## 📊 사용 방법

### Step 1: 배달의민족 NPS 분석 탭 선택

메인 화면에서 **"🍔 배달의민족 NPS 분석"** 탭을 클릭합니다.

### Step 2: 데이터 파일 업로드

**필수 파일 (2개)**:

#### 1️⃣ Qualtrics 설문 데이터 (필수)
- **파일명 예시**: `dummy_qualtrics_food.csv`
- **포함 컬럼**:
  - `Q1_1`: NPS 점수 (0-10)
  - `gender`: 성별 (남성/여성)
  - `age_group`: 연령대 (20대, 30대, 40대, 50대, 60대이상)
  - `rgn_nm`: 지역 (수도권/비수도권/제주)
  - `bmclub`: 배민클럽 가입 여부
  - `division`: 서비스 구분 (배달/포장 등)
  - 기타 개방형 응답 컬럼들

#### 2️⃣ 인구통계 가중치 (필수)
- **파일명 예시**: `dummy_population_food.csv`
- **포함 컬럼**:
  - `gender`, `age_group`, `rgn_nm`, `bmclub`, `division`, `is_mfo`
  - `mem_rate`: 각 세그먼트의 가중치
- **세그먼트 수**: 241개 (2×5×3×2×... 조합)

**선택 파일 (1개)**:

#### 3️⃣ 카테고리 코딩 데이터 (선택)
- **파일명 예시**: `dummy_coding_food.csv`
- **포함 컬럼**:
  - `ResponseId`: 응답자 ID
  - 각 개방형 질문에 대한 카테고리 분류 컬럼
- **용도**: NPS 그룹별 주요 언급 카테고리 분석

### Step 3: 자동 분석 실행

**방법 1: 자동 실행 (권장)**
1. "파일 업로드 후 자동으로 분석 실행" 체크박스를 선택 (기본값)
2. 필수 파일 2개를 업로드하면 자동으로 분석이 시작됩니다

**방법 2: 수동 실행**
1. 체크박스를 해제
2. 파일을 모두 업로드한 후
3. "분석 시작" 버튼을 클릭

### Step 4: 결과 확인

분석이 완료되면 다음 정보가 표시됩니다:

## 📈 분석 결과 해석

### 1. 전체 NPS 점수 카드

**4개의 주요 지표**:
- **가중 NPS 점수**: 인구통계 가중치가 적용된 최종 NPS
  - ≥50: 우수 (녹색)
  - 0-49: 보통 (노란색)
  - <0: 개선 필요 (빨간색)
- **Promoters %**: 9-10점 응답자 비율
- **Passives %**: 7-8점 응답자 비율
- **Detractors %**: 0-6점 응답자 비율

**추가 정보**:
- 총 응답자 수
- 가중치 스케일 팩터 (정규화 계수)

### 2. 인구통계별 NPS 분석

**표시 내용** (상위 20개 세그먼트):
- 성별, 연령대, 지역, 배민클럽, 서비스 구분
- 각 세그먼트의 NPS 점수
- 응답자 수
- 적용된 가중치

**활용 방법**:
- NPS가 낮은 세그먼트를 찾아 개선 포인트 파악
- 가중치가 높은 세그먼트의 NPS에 주목
- 특정 인구통계 그룹의 만족도 추세 분석

### 3. NPS 그룹별 주요 카테고리

**3개 그룹 분석**:
- **🎉 Promoters (9-10점)**: 긍정적 요인
- **😐 Passives (7-8점)**: 중립적 요인
- **😞 Detractors (0-6점)**: 부정적 요인

**각 카테고리 정보**:
- 카테고리명
- 응답율 (%)
- 언급 횟수
- 가중치 적용 값

**활용 방법**:
- Promoters의 주요 카테고리 → 강점 유지
- Detractors의 주요 카테고리 → 개선 우선순위
- 그룹 간 카테고리 비교로 인사이트 도출

## 🔄 재분석 및 추가 기능

### 재분석 실행
- 결과 화면 하단의 **"🔄 분석 다시 실행"** 버튼 클릭
- 새로운 파일을 업로드하면 자동으로 기존 데이터를 대체

### 다른 파일로 교체
- 각 업로드 카드를 다시 클릭하여 새 파일 선택
- 이전 파일은 자동으로 대체됨

## ⚠️ 주의사항

### 데이터 형식
1. **인코딩**: CSV 파일은 **UTF-8-BOM** 인코딩 사용 권장
2. **필수 컬럼**: 각 파일의 필수 컬럼명이 정확해야 함
3. **데이터 타입**: NPS 점수는 0-10 정수, 가중치는 소수점 가능

### 오류 발생 시
1. **업로드 오류**:
   - 파일 형식 확인 (CSV만 지원)
   - 필수 컬럼 존재 여부 확인
   - 인코딩 확인 (UTF-8 권장)

2. **분석 오류**:
   - 필수 파일 2개가 모두 업로드되었는지 확인
   - 데이터 형식이 올바른지 확인
   - 오류 메시지의 "다시 시도" 버튼 클릭

3. **연결 오류**:
   - 백엔드 서버가 실행 중인지 확인 (http://localhost:8000)
   - 프론트엔드가 실행 중인지 확인 (http://localhost:3000)

## 📁 파일 형식 예시

### Qualtrics 설문 데이터
```csv
ResponseId,Q1_1,gender,age_group,rgn_nm,bmclub,division
R_001,9,남성,30대,수도권,Y,배달
R_002,7,여성,40대,비수도권,N,포장
```

### 인구통계 가중치
```csv
gender,age_group,rgn_nm,bmclub,division,is_mfo,mem_rate
남성,20대,수도권,Y,배달,Y,0.0234
여성,30대,비수도권,N,포장,N,0.0156
```

### 카테고리 코딩
```csv
ResponseId,category1,category2
R_001,배송 속도,앱 편의성
R_002,음식 품질,가격
```

## 💡 팁과 베스트 프랙티스

### 분석 효율화
1. **자동 분석 모드 사용**: 파일 업로드 시 자동으로 분석되도록 설정
2. **필수 파일 우선**: Qualtrics와 Population 파일을 먼저 업로드
3. **선택 파일 활용**: 카테고리 분석이 필요한 경우에만 Coding 파일 업로드

### 데이터 품질 관리
1. **정기적 검증**: 업로드된 파일의 행 수와 세그먼트 수 확인
2. **가중치 합계**: Population 파일의 가중치 합계가 1에 가까운지 확인
3. **유효 응답**: Qualtrics 파일의 유효 NPS 응답 수 확인

### 결과 해석
1. **전체 NPS**: -100 ~ +100 범위, 업계 벤치마크와 비교
2. **트렌드 분석**: 주기적 분석으로 NPS 변화 추적
3. **액션 플랜**: Detractors 주요 카테고리 기반 개선 과제 도출

## 🆘 지원 및 문의

### 기술 지원
- 이슈 발생 시 백엔드 콘솔 로그 확인
- 브라우저 개발자 도구 (F12) 콘솔에서 오류 메시지 확인

### 문서 참조
- `CLAUDE.md`: 프로젝트 전체 문서
- `FOOD_NPS_IMPLEMENTATION.md`: 구현 상세 문서
- `guide/MANUAL_monthly_analysis.md`: 월간 분석 가이드

## 🔮 향후 개선 사항

계획 중인 기능:
- 📊 차트 시각화 (막대 그래프, 트렌드 차트)
- 📥 Excel 결과 내보내기
- 📅 시계열 분석 (월별 NPS 변화)
- 🔔 임계값 알림 (NPS가 특정 수준 이하일 때)
- 💾 분석 이력 저장 및 비교

---

**버전**: 1.0.0
**마지막 업데이트**: 2025년 1월
