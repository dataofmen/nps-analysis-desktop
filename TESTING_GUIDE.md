# Food NPS GUI 시스템 테스트 가이드

## 🎯 테스트 개요

배달의민족 NPS 자동 분석 시스템의 전체 워크플로우를 검증하는 테스트 가이드입니다.

## 🏗️ 테스트 환경 설정

### 1. 필수 요구사항
- Python 3.8+
- Node.js 14+
- 백엔드 의존성: `pip install -r backend/requirements.txt`
- 프론트엔드 의존성: `npm install` (frontend 디렉토리에서)

### 2. 테스트 데이터 준비
프로젝트 루트에 다음 더미 파일이 있는지 확인:
- `dummy_qualtrics_food.csv` (필수)
- `dummy_population_food.csv` (필수)
- `dummy_coding_food.csv` (선택)
- `dummy_var_food.csv` (참고용)

## 📝 테스트 체크리스트

### Phase 1: 백엔드 API 테스트

#### 1.1 백엔드 서버 시작
```bash
cd backend
uvicorn main:app --reload
```

**검증**:
- ✅ 서버가 http://localhost:8000 에서 실행됨
- ✅ 콘솔에 "Application startup complete" 메시지 표시

#### 1.2 자동화된 API 테스트 실행
```bash
python test_food_nps_api.py
```

**예상 결과**:
```
============================================================
🧪 Food NPS API Test Suite
배달의민족 NPS 분석 시스템 테스트
============================================================

============================================================
Testing: Upload Qualtrics Data
============================================================
✅ Upload successful!
   - Rows: 2411
   - Valid NPS scores: 2409
   - Columns: 50+

============================================================
Testing: Upload Population Data
============================================================
✅ Upload successful!
   - Segments: 241
   - Total weight: 1.0000
   - Columns: 7

============================================================
Testing: Upload Coding Data
============================================================
✅ Upload successful!
   - Rows: 2411
   - Unique categories: 20+

============================================================
Testing: Check Status
============================================================
✅ Status retrieved successfully!
   - Qualtrics uploaded: True (2411 rows)
   - Population uploaded: True (241 segments)
   - Coding uploaded: True (2411 rows)

============================================================
Testing: Analyze Food NPS
============================================================
✅ Analysis successful!

   📊 Overall Results:
   - NPS Score: ~-18.0
   - Total Responses: 2409
   - Promoters: ~25%
   - Passives: ~32%
   - Detractors: ~43%
   - Scale Factor: ~1.0

   👥 Sample Demographic Segments (first 5):
   ...

   📁 Category Analysis:
   Promoters - Top 3 Categories:
   ...

============================================================
📋 Test Summary
============================================================
✅ PASS - upload_qualtrics
✅ PASS - upload_population
✅ PASS - upload_coding
✅ PASS - status_check
✅ PASS - analyze

   Total: 5/5 tests passed

🎉 All tests passed! Food NPS API is working correctly.
```

**검증 포인트**:
- ✅ 모든 5개 테스트 통과
- ✅ NPS 점수가 예상 범위 (-30 ~ -10) 내에 있음
- ✅ 응답자 수가 ~2,409명
- ✅ 가중치 스케일 팩터가 ~1.0

### Phase 2: 프론트엔드 GUI 테스트

#### 2.1 프론트엔드 서버 시작
```bash
cd frontend
npm start
```

**검증**:
- ✅ 브라우저가 자동으로 http://localhost:3000 을 엶
- ✅ "NPS Analysis Automation" 페이지 로드됨

#### 2.2 UI 구성 요소 확인

**메인 화면**:
- ✅ 헤더: "NPS Analysis Automation"
- ✅ 부제: "가중치 적용 자동 NPS 분석 시스템"
- ✅ 두 개의 탭 존재:
  - 📊 Generic NPS Analysis
  - 🍔 배달의민족 NPS 분석

#### 2.3 배달의민족 NPS 분석 탭 테스트

##### Step 1: 탭 전환
1. "🍔 배달의민족 NPS 분석" 탭 클릭
2. **검증**:
   - ✅ 탭이 파란색으로 활성화됨
   - ✅ 업로드 섹션이 표시됨

##### Step 2: 파일 업로드 인터페이스 확인
**3개의 업로드 카드 존재**:
1. ✅ 📊 Qualtrics 설문 데이터 (필수)
2. ✅ 👥 인구통계 가중치 (필수)
3. ✅ 📁 카테고리 코딩 (선택)

**각 카드 요소**:
- ✅ 제목과 설명
- ✅ 필수/선택 표시
- ✅ 파일 선택 영역 (드래그 앤 드롭 지원)
- ✅ 업로드 상태 표시

**체크박스**:
- ✅ "파일 업로드 후 자동으로 분석 실행" (기본 체크됨)

##### Step 3: Qualtrics 데이터 업로드

**테스트 절차**:
1. Qualtrics 카드의 파일 선택 영역 클릭
2. `dummy_qualtrics_food.csv` 선택
3. **검증**:
   - ✅ "업로드 중..." 로딩 스피너 표시
   - ✅ 업로드 완료 후 "✓ 업로드 완료" 배지 표시
   - ✅ 카드 테두리가 녹색으로 변경
   - ✅ 파일 정보 표시:
     - 파일명: `dummy_qualtrics_food.csv`
     - 전체 행 수: ~2,411개
     - 유효 NPS 응답: ~2,409개

##### Step 4: Population 데이터 업로드

**테스트 절차**:
1. Population 카드의 파일 선택 영역 클릭
2. `dummy_population_food.csv` 선택
3. **검증**:
   - ✅ 업로드 완료 표시
   - ✅ 파일 정보 표시:
     - 인구통계 세그먼트: 241개
     - 가중치 합계: ~1.0000

##### Step 5: 자동 분석 실행 확인

**자동 분석 모드 (기본값)**:
- ✅ 필수 파일 2개 업로드 완료 후 0.5초 대기
- ✅ 자동으로 결과 섹션으로 스크롤
- ✅ 로딩 화면 표시:
  - "가중치를 적용하여 NPS를 계산하는 중..."
  - 회전하는 로딩 스피너
  - "잠시만 기다려주세요"

##### Step 6: 분석 결과 확인

**결과 로딩 시간**:
- ⏱️ 일반적으로 2-5초 소요

**전체 NPS 점수 섹션**:
- ✅ 제목: "📊 배달의민족 NPS 분석 결과"
- ✅ 4개의 메트릭 카드:
  1. **가중 NPS 점수**: 숫자와 색상 (예: -18.52, 빨간색)
  2. **Promoters (9-10점)**: 백분율 (예: 25.3%)
  3. **Passives (7-8점)**: 백분율 (예: 31.9%)
  4. **Detractors (0-6점)**: 백분율 (예: 42.8%)
- ✅ 추가 정보:
  - 총 응답자 수: 2,409명
  - 가중치 스케일 팩터: ~1.0

**인구통계별 NPS 분석 테이블**:
- ✅ 제목: "👥 인구통계별 NPS 분석"
- ✅ 테이블 헤더:
  - 성별, 연령대, 지역, 배민클럽, 서비스, NPS, 응답자, 가중치
- ✅ 상위 20개 세그먼트 표시
- ✅ NPS 점수에 색상 코딩 적용
- ✅ 하단 메시지: "상위 20개 세그먼트만 표시 (전체 241개)"

##### Step 7: Coding 데이터 업로드 (선택)

**테스트 절차**:
1. 결과 화면이 표시된 상태에서 위로 스크롤
2. Coding 카드의 파일 선택 영역 클릭
3. `dummy_coding_food.csv` 선택
4. **검증**:
   - ✅ 업로드 완료 표시
   - ✅ 파일 정보:
     - 코딩 행 수: ~2,411개
     - 고유 카테고리: ~20개
5. "🔄 분석 다시 실행" 버튼 클릭
6. **검증**:
   - ✅ 결과가 다시 로딩됨
   - ✅ 카테고리 분석 섹션이 추가로 표시됨

**카테고리 분석 섹션**:
- ✅ 제목: "📁 NPS 그룹별 주요 언급 카테고리"
- ✅ 3개의 컬럼:
  1. **🎉 Promoters (9-10점)**: 녹색 배경
  2. **😐 Passives (7-8점)**: 노란색 배경
  3. **😞 Detractors (0-6점)**: 빨간색 배경
- ✅ 각 그룹당 상위 5개 카테고리 표시
- ✅ 각 카테고리 카드 포함:
  - 카테고리명
  - 응답율 (%)
  - 언급 횟수와 가중치

##### Step 8: 재분석 기능 테스트

**테스트 절차**:
1. 결과 화면 하단의 "🔄 분석 다시 실행" 버튼 클릭
2. **검증**:
   - ✅ 로딩 화면 다시 표시
   - ✅ 분석이 재실행되어 동일한 결과 표시

##### Step 9: 파일 교체 테스트

**테스트 절차**:
1. 업로드 섹션으로 스크롤
2. 이미 업로드된 Qualtrics 카드 클릭
3. 동일한 파일 다시 선택
4. **검증**:
   - ✅ 기존 파일이 새 파일로 대체됨
   - ✅ 파일 정보가 업데이트됨
   - ✅ 자동 분석 다시 실행됨 (자동 모드인 경우)

### Phase 3: 에러 처리 테스트

#### 3.1 잘못된 파일 형식 테스트

**테스트 절차**:
1. Qualtrics 카드에 `.txt` 파일 업로드 시도
2. **예상 결과**:
   - ⚠️ "업로드 오류" 알림 표시
   - ⚠️ 파일 업로드 실패
   - ✅ 카드 상태가 초기 상태로 유지됨

#### 3.2 백엔드 연결 실패 테스트

**테스트 절차**:
1. 백엔드 서버 중지 (Ctrl+C)
2. 프론트엔드에서 파일 업로드 시도
3. **예상 결과**:
   - ❌ 업로드 오류 메시지 표시
   - ✅ 에러 메시지에 구체적인 오류 내용 포함
4. 백엔드 서버 재시작
5. "다시 시도" 버튼 클릭
6. **검증**:
   - ✅ 정상적으로 업로드됨

#### 3.3 불완전한 데이터 업로드 테스트

**테스트 절차**:
1. Qualtrics 파일만 업로드 (Population 없이)
2. 자동 분석 모드가 꺼져 있는 상태에서 "분석 시작" 버튼 확인
3. **검증**:
   - ✅ "분석 시작" 버튼이 비활성화되거나 표시되지 않음
   - ✅ 필수 파일 2개가 모두 업로드될 때까지 분석 불가

### Phase 4: 성능 및 사용성 테스트

#### 4.1 로딩 시간 측정
- ⏱️ 파일 업로드: 각 파일당 <2초
- ⏱️ 분석 실행: <5초
- ⏱️ 결과 렌더링: <1초

#### 4.2 반응형 디자인 확인
**브라우저 창 크기 조정**:
- ✅ 데스크톱 (>1024px): 4열 그리드
- ✅ 태블릿 (768-1024px): 2열 그리드
- ✅ 모바일 (<768px): 1열 스택

#### 4.3 사용자 피드백 확인
- ✅ 업로드 중 로딩 스피너 표시
- ✅ 성공 시 녹색 배지와 체크마크
- ✅ 실패 시 빨간색 오류 메시지
- ✅ 분석 중 진행 상황 메시지

### Phase 5: 크로스 브라우저 테스트

#### 5.1 지원 브라우저
- ✅ Chrome (최신 버전)
- ✅ Firefox (최신 버전)
- ✅ Safari (최신 버전)
- ✅ Edge (최신 버전)

#### 5.2 각 브라우저에서 확인
- ✅ UI 레이아웃 정상
- ✅ 파일 업로드 기능 작동
- ✅ API 통신 정상
- ✅ 결과 표시 정상

## 📊 테스트 결과 기록

### 테스트 실행 템플릿

```
테스트 날짜: YYYY-MM-DD
테스터: [이름]
환경:
  - OS: [Windows/Mac/Linux]
  - 브라우저: [Chrome/Firefox/Safari/Edge]
  - Python 버전: [3.x.x]
  - Node.js 버전: [14.x.x]

백엔드 API 테스트:
  [ ] 서버 시작 성공
  [ ] test_food_nps_api.py 전체 통과
  [ ] NPS 점수 범위 정상 (-30 ~ -10)

프론트엔드 GUI 테스트:
  [ ] 탭 전환 정상
  [ ] Qualtrics 업로드 성공
  [ ] Population 업로드 성공
  [ ] 자동 분석 실행 성공
  [ ] 결과 표시 정상
  [ ] Coding 업로드 및 카테고리 분석 표시 정상
  [ ] 재분석 기능 정상

에러 처리 테스트:
  [ ] 잘못된 파일 형식 에러 처리
  [ ] 백엔드 연결 실패 에러 처리
  [ ] 불완전한 데이터 업로드 방지

성능 테스트:
  [ ] 파일 업로드 <2초
  [ ] 분석 실행 <5초
  [ ] 결과 렌더링 <1초

추가 메모:
[테스트 중 발견한 이슈나 개선 사항 기록]
```

## ✅ 테스트 완료 기준

모든 테스트가 통과되면 시스템은 **프로덕션 사용 준비 완료** 상태입니다:

1. ✅ 백엔드 API 5개 테스트 모두 통과
2. ✅ 프론트엔드 GUI 모든 기능 정상 작동
3. ✅ 에러 처리 시나리오 검증 완료
4. ✅ 성능 기준 충족
5. ✅ 크로스 브라우저 호환성 확인

## 🐛 이슈 발견 시

### 버그 리포트 작성
```markdown
제목: [컴포넌트명] 간단한 이슈 설명

재현 단계:
1. [단계 1]
2. [단계 2]
3. [단계 3]

예상 결과:
[무엇이 일어나야 하는지]

실제 결과:
[무엇이 일어났는지]

환경:
- OS: [운영체제]
- 브라우저: [브라우저 버전]
- Python: [버전]
- Node.js: [버전]

스크린샷/로그:
[관련 스크린샷 또는 콘솔 로그]
```

## 📚 참고 문서

- `FOOD_NPS_USER_GUIDE.md`: 사용자 가이드
- `FOOD_NPS_IMPLEMENTATION.md`: 구현 상세 문서
- `test_food_nps_api.py`: 백엔드 API 테스트 스크립트
- `README.md`: 프로젝트 전체 문서

---

**버전**: 1.0.0
**마지막 업데이트**: 2025년 1월
